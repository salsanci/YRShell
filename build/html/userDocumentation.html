<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Yrshell: YrShell user documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Yrshell
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Your interactive shell for Ardiuno Arm based system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">YrShell</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">YrShell user documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>YrShell is designed and tested on ST-Microelectronics STM32Nucleo-L476RG micocontroller board. This hardware should be more or ess compatible with ANY Arduino board, but we will not be sure until user confirm or deny specific boards. For the purpose of this document we will only discuss one hardware board, the STM32Nucleo-K476RG.</p>
<p>Setup-Hardware</p>
<p>Setup-STM32Nucleo-L476RG</p>
<p>Remove from package. Find the USB mini cable. Notice there are header pins exposed on both the top and bottom, take precautions so these do not get bent or shorted. I found some stanoffs and mounted it in a cookie tin. You might set it on a clean folder shop towel for the time being. Aside from physically secring the board, nothing more needs to be done until we are ready to program.</p>
<p>Setup-PC-hardware</p>
<p>PC Hardware needs at least available USB port to use as virtual serial port. Old type RS232 serial port is possible but not covered here until requested.</p>
<p>PC-Operating Systems Supported</p>
<p>The YrShell development environment is tested on Mac OSX, Linux Mint 18.2, and Windows 10. Other versions of MacOSX, Linux (Ubuntu, debian), and Windows should work as expected. Windows XP is possible but not covered here until requested.</p>
<p>Plug in USB cable to available USB port on PC. Notice that the USB cable prvides power to the Board. Plug other end into Nucleo-L476RG board; You should see a directory window open for /media/&lt;user&gt;/NODE_L476RG (linux) containing two files, DETAILS.TXT and MBED.HTM NOTE: Linux Mint displays the directory, LED1 COM is solid RED NOTE: Windows 10 gives an error, LED1 COM flashes RED</p>
<p>FIRST TIME ONLY:</p>
<p>The STM32Nucleo-L476RG ships with a demo software image. Press Button B1 (the blue one) and observe the blink pattern changes. Congratulations! Your board is working correctly.</p>
<p>Setup-PC-Software</p>
<p>Setup-Arduino-IDE</p>
<p>Start with the instructions <a href="https://github.com/stm32duino/wiki/wiki/Getting-Started">https://github.com/stm32duino/wiki/wiki/Getting-Started</a></p>
<p>STEP 1:</p>
<p>Download recent Arduino IDE (1.8.4 as of this writing) from: Mac OSX used <a href="https://www.arduino.cc/download_handler.php?f=/arduino-1.8.4-macosx.zip">https://www.arduino.cc/download_handler.php?f=/arduino-1.8.4-macosx.zip</a> Linux (Ubuntu, Mint) used <a href="https://www.arduino.cc/download_handler.php?f=/arduino-1.8.4-linux64.tar.xz">https://www.arduino.cc/download_handler.php?f=/arduino-1.8.4-linux64.tar.xz</a> [Follow the istruction until you the Arduino IDE icon on your desktop] Extract the contents of the archive (I did "extract here" in Downloads) Find Install.sh (linux) Execute this script, it puts the icon on the desktop, but does not yet put an Arduino directory in your home folder</p>
<p>STEP 2:</p>
<p>The second step of the instructions we are following take us to the Board Manager <a href="https://github.com/stm32duino/wiki/wiki/Boards-Manager">https://github.com/stm32duino/wiki/wiki/Boards-Manager</a> The board manager adds definitions for the STM32L476RG board we will be using. Start the Arduino IDE Arduino IDE &gt; File &gt; Preferences &gt; Settings &gt; Additional Boards Manager URL: <a href="https://github.com/stm32duino/BoardManagerFiles/raw/master/STM32/package_stm_index.json">https://github.com/stm32duino/BoardManagerFiles/raw/master/STM32/package_stm_index.json</a> Tools &gt; Board Manager &gt; Select "STM32 Cores" from the bottom of the list OK Close</p>
<p>Step 3:</p>
<p>Select the Nucleo-64 L476RG: Arduino IDE &gt; Tools &gt; Board: &gt; Nucleo-64 (at the bottom of the list) Arduino IDE &gt; Tools &gt; Board number: Nucleo-L476RRG Arduino IDE &gt; Tools &gt; Upload Method: Mass Storage (STLink gives an error) Arduino IDE &gt; Tools &gt; USB Interface: None (default) Arduino IDE &gt; Tools &gt; Other Serial instance: All (default) Arduino IDE &gt; Tools &gt; Port: /dev/ttyACM0 (on Linux) /dev/ttyzzz (on MACOS) COM1 (on Windows) If PORT is greyed out, plug in the USB cable</p>
<p>AT THIS POINT, CHECK GROUPS FOR DIALOUT (FOR OSX and Linux) In linux, we need to grant permission for the user to access the communications port(s). <a href="https://askubuntu.com/questions/207999/how-to-add-dialup-group">https://askubuntu.com/questions/207999/how-to-add-dialup-group</a> enter this command at the linux command prompt:</p>
<p>sudo adduser $USER dialout</p>
<p>You must logout and log in again for this to take affect.</p>
<p>TEST: Verify the Arduino IDE is correctly configured for the STM32-L476RG (at the bottom of the Getting-Started page, folllow the link to the Blink Example) <a href="https://github.com/stm32duino/wiki/wiki/Blink-example">https://github.com/stm32duino/wiki/wiki/Blink-example</a> Verify the blink and button behavior (different blink, button has no effect)</p>
<p>At this point, the general Arduino IDE is setup for the STM32Nucleo-L476RG. The IDE has been verified as working by successful compilaction and load of an example program. Now we procedue to the YrShell module. </p><hr/>
<p>Software Setup - YrShell</p>
<p>Setup-YrShell Download Fshell from GitHub <a href="https://github.com/salsanci/YRShell">https://github.com/salsanci/YRShell</a> copy the directory to /home/&lt;yourusername&gt;/Arduino/libraries/ The result should look like this: /home/&lt;yourusername&gt;/Arduino/libraries/YRShell</p>
<p>The <a class="el" href="class_y_r_shell.html" title="YRShell - interactive. ">YRShell</a> directory should contain several files and subdirectories, such as: /home/&lt;yourusername&gt;/Arduino/libraries/YRShell/examples /home/&lt;yourusername&gt;/Arduino/libraries/YRShell/utility</p>
<p>Plug in the USB cable to the Nucleo-L476 board if it is not already. Start the ARduino IDE Sketch &gt; Include Library &gt; <a class="el" href="class_y_r_shell.html" title="YRShell - interactive. ">YRShell</a> (way at the bottom) Navigate to the Fshell arduino sketch: File &gt; OPen &gt; /home/&lt;yourusername&gt;/Arduino/libraries/YRShell/examples/multipleShells/ multipleShells.ino</p>
<p>The Arduino IDE should display the Fshell sketch on your screen if it is set upcorrectly. Notice line 129 - Serial.begin(115200);</p>
<p>Verify and upload the sketch to the Nucleo-L476 using the icons at the top of the arduino IDE. The LD1 COMM LED on by the USB jack should flash from green to red a couple times. The green LED LD2 should flash ON for about a half second and OFF for about a second and a half. Notice Lines 143 and 146. You can very the blink pattern by changing these intervals. Notice that you must upload after each edit for the change to affect the blink pattern. If you can change the blink pattern for example 10 milliseconds on and 1500 millseconds off, you are set up correctly.</p>
<p>Test the Fshell Command line. In the arduino IDE select Tools &gt; Serial Monitor At the bootom of the window, select: Carriage Return 115200 baud</p>
<p>At the serial monitor input field (at the top of the window) type in a couple numbers separated by spaces, and hit enter.</p>
<p>in the input field, type in st? and hit enter. Type in wl and hit enter</p>
<p><a class="el" href="class_y_r_shell.html" title="YRShell - interactive. ">YRShell</a> is now set up and ready for action.</p>
<p>End of user documentation </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
